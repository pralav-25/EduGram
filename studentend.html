
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edugram - Student Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Oriya:wght@400;700&family=Baloo+2:wght@400;700&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- Base & Theming Styles --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #C2B280; /* Khaki / Light Wood */
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .oriya-text {
            font-family: 'Noto Sans Oriya', sans-serif;
        }

        .font-comic { font-family: 'Comic Neue', cursive; }
        .font-baloo { font-family: 'Baloo 2', sans-serif; }

        /* --- Sidebar Styles --- */
        .sidebar {
            background-color: #3A2E39; /* Dark Purple-Brown */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .sidebar-link {
            transition: all 0.2s ease;
            transform-origin: left center;
        }
        .sidebar-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .sidebar-link.active {
            background-color: #D85B2A; /* Terracotta Red from main site */
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border-right: 4px solid #F4A261;
        }

        /* --- Main Content Styles --- */
        .content-view {
            animation: fadeIn 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stat-card {
            background-color: #fefae0;
            border: 4px solid #8B4513; /* Saddle Brown */
            box-shadow: 5px 5px 0px #8B4513;
            transition: all 0.2s ease-in-out;
        }
        .stat-card:hover {
            transform: translate(-2px, -2px);
            box-shadow: 7px 7px 0px #8B4513;
        }

        .game-card, .module-card {
            background-color: #fff;
            border-radius: 12px;
            border: 3px solid #3A2E39;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            overflow: hidden;
        }
        .game-card:hover, .module-card:hover {
            transform: translateY(-5px) rotate(1deg);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .game-card.disabled {
            filter: grayscale(1);
            cursor: not-allowed;
        }
        .game-card-banner, .module-card-banner {
            background: linear-gradient(45deg, #2a9d8f, #264653);
        }
        .game-card-banner.coming-soon {
             background: linear-gradient(45deg, #6c757d, #343a40);
        }

        .profile-card {
            background-color: #FFF9F0;
            border-radius: 15px;
            border: 2px dashed #D85B2A;
        }
        
        .modal-overlay { 
            position: fixed; 
            inset: 0; 
            background-color: rgba(15, 23, 42, 0.6); 
            backdrop-filter: blur(4px); 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            z-index: 110; 
            animation: fadeIn 0.3s ease; 
        }
        .modal-content { 
            background-color: #FFF9F0;
            padding: 2rem; 
            border-radius: 1.25rem; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.2); 
            width: 100%; 
            max-width: 48rem; 
            max-height: 90vh;
            overflow-y: auto;
        }
        
        #game-view {
            position: fixed;
            inset: 0;
            z-index: 100;
            overflow-y: auto;
        }
        
        #game-view-content {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div class="flex h-screen bg-gray-100">
        <div class="sidebar w-64 space-y-6 py-7 px-2 text-white absolute inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 transition duration-200 ease-in-out">
            <a href="#" class="text-white flex items-center space-x-2 px-4">
                 <img src="edugram-logo.jpeg" alt="Edugram Logo" class="h-16">
            </a>

            <nav>
                <a href="#dashboard" class="sidebar-link block py-2.5 px-4 rounded transition duration-200 flex items-center space-x-3 active" data-view="dashboard-view">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>
                    <span>Dashboard</span>
                </a>
                <a href="#games" class="sidebar-link block py-2.5 px-4 rounded transition duration-200 flex items-center space-x-3" data-view="games-view">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span>Games</span>
                </a>
                <a href="#modules" class="sidebar-link block py-2.5 px-4 rounded transition duration-200 flex items-center space-x-3" data-view="modules-view">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v11.494m-9-5.747h18" /></svg>
                    <span>Modules</span>
                </a>
                <a href="#leaderboard" class="sidebar-link block py-2.5 px-4 rounded transition duration-200 flex items-center space-x-3" data-view="leaderboard-view">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                    <span>Leaderboard</span>
                </a>
                <a href="#profile" class="sidebar-link block py-2.5 px-4 rounded transition duration-200 flex items-center space-x-3" data-view="profile-view">
                     <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                    <span>My Profile</span>
                </a>
                <a href="#gethelp" class="sidebar-link block py-2.5 px-4 rounded transition duration-200 flex items-center space-x-3" data-view="gethelp-view">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"/>
                    </svg>
                    <span>Get Help</span>
                </a>
                <a href="https://education.gov.in" target="_blank" rel="noopener noreferrer" class="sidebar-link block py-2.5 px-4 rounded transition duration-200 flex items-center space-x-3">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h6m-6 4h6m-6 4h6" />
                    </svg>
                    <span>Government Circulars</span>
                </a>
            </nav>

            <a href="index.html" class="sidebar-link absolute bottom-5 left-4 right-4 block py-2.5 px-4 rounded transition duration-200 flex items-center space-x-3 bg-red-500 hover:bg-red-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                <span>Logout</span>
            </a>
        </div>

        <div class="flex-1 flex flex-col overflow-hidden">
           <main class="flex-1 overflow-x-hidden overflow-y-auto p-6 md:p-10">
    <div id="dashboard-view" class="content-view">
        <h1 class="font-baloo text-4xl text-gray-800 mb-2">Welcome Back, Student!</h1>
        <p class="text-gray-600 mb-8">Let's continue your learning adventure. Keep up the great work!</p>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
            <div class="stat-card p-6 rounded-lg"><h3 class="text-lg font-bold text-gray-500">Total Score</h3><p class="font-baloo text-5xl font-bold text-amber-600">1,250</p></div>
            <div class="stat-card p-6 rounded-lg"><h3 class="text-lg font-bold text-gray-500">Games Played</h3><p class="font-baloo text-5xl font-bold text-cyan-600">8</p></div>
            <div class="stat-card p-6 rounded-lg"><h3 class="text-lg font-bold text-gray-500">Badges Earned</h3><p class="font-baloo text-5xl font-bold text-lime-600">3</p></div>
            <div class="stat-card p-6 rounded-lg"><h3 class="text-lg font-bold text-gray-500">Rank</h3><p class="font-baloo text-5xl font-bold text-violet-600">#12</p></div>
        </div>
        <!-- Screen Time / Session Card (single current session, auto-updating) -->
        <div class="grid grid-cols-1 md:grid-cols-1 gap-6 mb-8">
            <div id="screen-time-card" class="stat-card p-6 rounded-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-lg font-bold text-gray-500">Current Session Screen Time</h3>
                        <p id="session-total" class="font-baloo text-3xl font-bold text-amber-600 mt-2">00:00:00</p>
                        <p class="text-sm text-gray-500 mt-1">Auto-updating — shows only the active (single) session.</p>
                    </div>
                    <div class="text-right">
                        <button id="reset-session" class="bg-red-500 text-white px-3 py-1 rounded">Reset</button>
                    </div>
                </div>
                <div class="mt-4 border-t pt-4 text-sm text-gray-700">
                    <div class="flex justify-between"><span>Website (non-game)</span><span id="session-site">00:00:00</span></div>
                    <div class="flex justify-between mt-2"><span>Game Played</span><span id="session-game">00:00:00</span></div>
                </div>
            </div>
        </div>
        <div class="bg-white p-8 rounded-xl shadow-lg border-2 border-gray-200">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Your Progress</h2>
            <div class="space-y-4">
                <div><h4 class="font-semibold mb-1">Language Learning</h4><div class="w-full bg-gray-200 rounded-full h-4"><div class="bg-blue-500 h-4 rounded-full" style="width: 75%"></div></div></div>
                <div><h4 class="font-semibold mb-1">Mathematics (Coming Soon)</h4><div class="w-full bg-gray-200 rounded-full h-4"><div class="bg-green-500 h-4 rounded-full" style="width: 0%"></div></div></div>
                <div><h4 class="font-semibold mb-1">Science (Coming Soon)</h4><div class="w-full bg-gray-200 rounded-full h-4"><div class="bg-yellow-500 h-4 rounded-full" style="width: 0%"></div></div></div>
            </div>
        </div>
    </div>

    <div id="games-view" class="content-view hidden">
        <h1 class="font-baloo text-4xl text-gray-800 mb-8">Choose a Game to Play</h1>
        <div id="games-grid-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"></div>
    </div>

    <div id="modules-view" class="content-view hidden">
        <h1 class="font-baloo text-4xl text-gray-800 mb-8">Subject Modules</h1>
        <div id="modules-grid-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"></div>
    </div>

    <div id="leaderboard-view" class="content-view hidden">
        <h1 class="font-baloo text-4xl text-gray-800 mb-8">Leaderboard</h1>
        <div class="bg-white p-8 rounded-xl shadow-lg border-2 border-gray-200">
            <table class="w-full text-left">
                <thead>
                    <tr>
                        <th class="p-4 font-bold">Rank</th>
                        <th class="p-4 font-bold">Name</th>
                        <th class="p-4 font-bold">Score</th>
                        <th class="p-4 font-bold">Badges</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b"><td class="p-4">1</td><td class="p-4">Student A</td><td class="p-4">1500</td><td class="p-4">5</td></tr>
                    <tr class="border-b"><td class="p-4">2</td><td class="p-4">Student B</td><td class="p-4">1450</td><td class="p-4">5</td></tr>
                    <tr class="border-b"><td class="p-4">3</td><td class="p-4">Student C</td><td class="p-4">1400</td><td class="p-4">4</td></tr>
                    <tr><td class="p-4">4</td><td class="p-4">Student D</td><td class="p-4">1350</td><td class="p-4">4</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="profile-view" class="content-view hidden">
        <h1 class="font-baloo text-4xl text-gray-800 mb-8">My Profile</h1>
        <div class="profile-card max-w-2xl mx-auto p-8">
            <div class="flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-8">
                <div id="profile-pic-container" class="relative cursor-pointer">
                    <img id="profile-pic" src="https://placehold.co/120x120/E2E8F0/4A5568?text=Student" alt="Profile Picture" class="w-32 h-32 rounded-full border-4 border-white shadow-md">
                    <input type="file" id="profile-pic-upload" class="hidden" accept="image/*">
                </div>
                <div>
                    <h2 id="profile-name" class="text-3xl font-bold text-gray-800">Student Name</h2>
                    <p id="profile-grade" class="text-gray-600">Grade: 8th</p>
                    <p id="profile-school" class="text-gray-600">School: Saraswati Vidya Mandir</p>
                </div>
            </div>
            <div class="mt-8 border-t border-gray-200 pt-6">
                <h3 class="text-xl font-bold mb-4">Account Settings</h3>
                <div class="space-y-3">
                    <button id="edit-profile-btn" class="w-full text-left bg-white p-3 rounded-lg border hover:bg-gray-50">Edit Profile Information</button>
                    <button id="change-password-btn" class="w-full text-left bg-white p-3 rounded-lg border hover:bg-gray-50">Change Password</button>
                    <button id="notification-settings-btn" class="w-full text-left bg-white p-3 rounded-lg border hover:bg-gray-50">Notification Settings</button>
                </div>
            </div>
        </div>
    </div>

    <div id="gethelp-view" class="content-view hidden">
        <h1 class="font-baloo text-4xl text-gray-800 mb-6">Need Help?</h1>
        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-2xl font-bold mb-4">Frequently Asked Questions</h2>
            <ul class="list-none ml-0 space-y-2 text-gray-700">
  <li>
    <div class="accordion-question font-semibold flex items-center"><span class="mr-2">Q:</span>How do I reset my password?</div>
    <div class="accordion-answer text-gray-600 pl-5 mb-2">A: Go to My Profile &gt; Change Password. Enter your current and new password, then save changes.</div>
  </li>
  <li>
    <div class="accordion-question font-semibold flex items-center"><span class="mr-2">Q:</span>Where can I find my badges?</div>
    <div class="accordion-answer text-gray-600 pl-5 mb-2">A: Your badges are displayed on the Dashboard under "Badges Earned".</div>
  </li>
  <li>
    <div class="accordion-question font-semibold flex items-center"><span class="mr-2">Q:</span>How do I play a new game?</div>
    <div class="accordion-answer text-gray-600 pl-5 mb-2">A: Go to the "Games" section in the sidebar and click on the game you wish to play.</div>
  </li>
  <li>
    <div class="accordion-question font-semibold flex items-center"><span class="mr-2">Q:</span>How do I check my learning progress?</div>
    <div class="accordion-answer text-gray-600 pl-5 mb-2">A: Click "Dashboard" to view your total score, games played, badges, and more details.</div>
  </li>
  <li>
    <div class="accordion-question font-semibold flex items-center"><span class="mr-2">Q:</span>How can I access study modules?</div>
    <div class="accordion-answer text-gray-600 pl-5 mb-2">A: Study modules are listed in the "Modules" tab. Click on a subject module to see notes and practice questions.</div>
  </li>
  <li>
    <div class="accordion-question font-semibold flex items-center"><span class="mr-2">Q:</span>Who do I contact for account issues?</div>
    <div class="accordion-answer text-gray-600 pl-5 mb-2">A: Please use the "Raise a Ticket" button below to reach our support team.</div>
  </li>
</ul>

        </div>
        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-2xl font-bold mb-4">Chat with Support Bot</h2>
            <div id="chat-box" class="border rounded-lg p-3 h-64 overflow-y-auto mb-4 bg-gray-50 text-sm"></div>
            <div class="flex">
                <input id="chat-input" type="text" placeholder="Ask a question..." class="flex-1 border p-2 rounded-l-lg">
                <button id="chat-send" class="bg-blue-500 text-white px-4 rounded-r-lg">Send</button>
            </div>
        </div>
<div id="bot-quick-questions" class="flex flex-wrap gap-2 mt-2 mb-1"></div>

        <div class="text-right">
            <button id="raise-ticket" class="bg-red-500 text-white px-6 py-2 rounded-lg">Raise a Ticket</button>
        </div>
    </div>

  <div id="ticket-modal" class="modal-overlay hidden">
  <div class="modal-content">
    <h2 class="text-2xl font-bold mb-4">Raise a Support Ticket</h2>
    <form id="ticket-form" class="space-y-4">
      <div>
        <label for="ticket-subject" class="block text-sm font-medium text-gray-700">Subject</label>
        <input id="ticket-subject" name="subject" type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
      </div>
      <div>
        <label for="ticket-description" class="block text-sm font-medium text-gray-700">Description</label>
        <textarea id="ticket-description" name="description" rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required></textarea>
      </div>
      <div class="flex justify-end gap-2">
        <button type="button" id="ticket-cancel" class="bg-gray-300 px-4 py-2 rounded hover:bg-gray-400">Cancel</button>
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Submit</button>
      </div>
    </form>
    <div id="ticket-success" class="hidden text-green-700 mt-4 font-bold">Ticket submitted! Our team will respond soon.</div>
  </div>
</div>

</main>        </div>
    </div>

    <div id="edit-profile-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4">Edit Profile</h2>
            <form id="edit-profile-form">
                <div class="mb-4"><label for="name-input" class="block text-sm font-medium text-gray-700">Name</label><input type="text" id="name-input" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"></div>
                <div class="mb-4"><label for="grade-select" class="block text-sm font-medium text-gray-700">Grade</label>
                    <select id="grade-select" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                        <option>6</option>
                        <option>7</option>
                        <option selected>8</option>
                        <option>9</option>
                        <option>10</option>
                        <option>11</option>
                        <option>12</option>
                    </select>
                </div>
                <div class="mb-4"><label for="school-input" class="block text-sm font-medium text-gray-700">School</label><input type="text" id="school-input" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"></div>
                <div class="flex justify-end gap-2"><button type="button" id="cancel-edit-btn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">Cancel</button><button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Save</button></div>
            </form>
        </div>
    </div>
    <div id="change-password-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4">Change Password</h2>
            <form id="change-password-form">
                <div class="mb-4"><label for="current-password" class="block text-sm font-medium text-gray-700">Current Password</label><input type="password" id="current-password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"></div>
                <div class="mb-4"><label for="new-password" class="block text-sm font-medium text-gray-700">New Password</label><input type="password" id="new-password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"></div>
                <div class="mb-4"><label for="confirm-password" class="block text-sm font-medium text-gray-700">Confirm New Password</label><input type="password" id="confirm-password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"></div>
                <div class="flex justify-end gap-2"><button type="button" id="cancel-password-btn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">Cancel</button><button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Save</button></div>
            </form>
        </div>
    </div>
    <div id="notification-settings-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4">Notification Settings</h2>
            <form id="notification-settings-form">
                <div class="flex items-center justify-between mb-4"><span class="text-sm font-medium text-gray-700">Game Reminders</span><label class="inline-flex items-center cursor-pointer"><input type="checkbox" value="" class="sr-only peer" checked><div class="relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div></label></div>
                <div class="flex items-center justify-between mb-4"><span class="text-sm font-medium text-gray-700">New Game Alerts</span><label class="inline-flex items-center cursor-pointer"><input type="checkbox" value="" class="sr-only peer"><div class="relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div></label></div>
                <div class="flex justify-end mt-6"><button type="button" id="close-notifications-btn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Done</button></div>
            </form>
        </div>
    </div>
    
    <div id="game-view" class="hidden">
        <div id="game-view-content">
            </div>
    </div>
    
    <footer class="bg-gray-800 text-white p-8">
        <div class="container mx-auto text-center">
            <h2 class="font-baloo text-3xl mb-6">Our Partners</h2>
            <div class="flex justify-center items-center gap-8 md:gap-12 flex-wrap mb-8">
                <img src="sih-logo.jpeg" alt="SIH Logo" class="h-20 grayscale hover:grayscale-0 transition duration-300">
                <img src="srm.jpeg" alt="SRM Logo" class="h-24 grayscale hover:grayscale-0 transition duration-300">
                <img src="govt-odia.jpeg" alt="Government of Odisha Logo" class="h-20 grayscale hover:grayscale-0 transition duration-300">
            </div>
            
            <div class="border-t border-gray-700 pt-6 mt-8">
                <h3 class="font-baloo text-2xl mb-4">Contact Us</h3>
                <div class="text-gray-400">
                    <p><strong>Address:</strong> Kattankulathur, Chennai, India</p>
                    <p><strong>Email:</strong> hello@edugram.org</p>
                    <p><strong>Phone:</strong> +91 12345 67890</p>
                </div>
                 <p class="text-sm text-gray-500 mt-6">&copy; 2024 Edugram. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const contentViews = document.querySelectorAll('.content-view');
            
            const initialView = window.location.hash.substring(1) || 'dashboard-view';
            switchView(initialView.replace('-view', ''));
            updateActiveLink(document.querySelector(`[data-view="${initialView}"]`));
            
            sidebarLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const viewId = link.dataset.view;
                    if (viewId) {
                        e.preventDefault();
                        if (typeof stopGameTimer === 'function') stopGameTimer();
                        switchView(viewId.replace('-view', ''));
                        updateActiveLink(link);
                        window.location.hash = viewId;
                    }
                });
            });

            function switchView(viewName) {
                contentViews.forEach(view => {
                    view.id === `${viewName}-view` ? view.classList.remove('hidden') : view.classList.add('hidden');
                });
            }

            function updateActiveLink(activeLink) {
                 sidebarLinks.forEach(link => link.classList.remove('active'));
                 if(activeLink) activeLink.classList.add('active');
            }

            // --- Profile Modals & Picture Logic ---
            const editProfileBtn = document.getElementById('edit-profile-btn');
            const changePasswordBtn = document.getElementById('change-password-btn');
            const notificationSettingsBtn = document.getElementById('notification-settings-btn');

            const editProfileModal = document.getElementById('edit-profile-modal');
            const changePasswordModal = document.getElementById('change-password-modal');
            const notificationSettingsModal = document.getElementById('notification-settings-modal');

            const cancelEditBtn = document.getElementById('cancel-edit-btn');
            const cancelPasswordBtn = document.getElementById('cancel-password-btn');
            const closeNotificationsBtn = document.getElementById('close-notifications-btn');
            
            const profileName = document.getElementById('profile-name');
            const profileGrade = document.getElementById('profile-grade');
            const profileSchool = document.getElementById('profile-school');
            
            const gamesGridContainer = document.getElementById('games-grid-container');
            const modulesGridContainer = document.getElementById('modules-grid-container');

            editProfileBtn.addEventListener('click', () => {
                document.getElementById('name-input').value = profileName.textContent;
                document.getElementById('grade-select').value = profileGrade.textContent.match(/\d+/)[0];
                document.getElementById('school-input').value = profileSchool.textContent.replace('School: ', '');
                editProfileModal.classList.remove('hidden');
            });
            changePasswordBtn.addEventListener('click', () => changePasswordModal.classList.remove('hidden'));
            notificationSettingsBtn.addEventListener('click', () => notificationSettingsModal.classList.remove('hidden'));
            
            cancelEditBtn.addEventListener('click', () => editProfileModal.classList.add('hidden'));
            cancelPasswordBtn.addEventListener('click', () => changePasswordModal.classList.add('hidden'));
            closeNotificationsBtn.addEventListener('click', () => notificationSettingsModal.classList.add('hidden'));

            document.getElementById('edit-profile-form').addEventListener('submit', (e) => {
                e.preventDefault();
                profileName.textContent = document.getElementById('name-input').value;
                const newGrade = document.getElementById('grade-select').value;
                profileGrade.textContent = `Grade: ${newGrade}th`;
                profileSchool.textContent = `School: ${document.getElementById('school-input').value}`;
                renderContent(newGrade);
                editProfileModal.classList.add('hidden');
            });

            const profilePicContainer = document.getElementById('profile-pic-container');
            const profilePic = document.getElementById('profile-pic');
            const profilePicUpload = document.getElementById('profile-pic-upload');

            profilePicContainer.addEventListener('click', () => {
                profilePicUpload.click();
            });

            profilePicUpload.addEventListener('change', (e) => {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        profilePic.src = event.target.result;
                    }
                    reader.readAsDataURL(e.target.files[0]);
                }
            });

            // --- Game and Module Data ---
            const gameData = {
                '6': [{ id: 'play-language-game', title: 'Language Adventure', desc: 'Master new languages.', available: true }, { title: 'Math Maze', desc: 'Navigate the world of numbers.', available: false }, { title: 'Science Lab', desc: 'Conduct cool experiments.', available: false }, { title: 'History Hunt', desc: 'Explore the past.', available: false }],
                '7': [{title: 'Geometry Genius', desc: 'Explore shapes and angles.', available: false }, { title: 'Biology Bonanza', desc: 'Learn about the animal kingdom.', available: false }, { title: 'Word Weavers', desc: 'Improve your vocabulary.', available: false }, { title: 'Ancient Civilizations', desc: 'Discover secrets of the past.', available: false }],
                '8': [{ id: 'play-algebra-game', title: 'Algebra Challenge', desc: 'Master equations and variables.', available: true }, { title: 'Chemistry Chaos', desc: 'Mix elements and create reactions.', available: false }, { title: 'Literature Legends', desc: 'Dive into classic stories.', available: false }, { title: 'World Wars Chronicle', desc: 'Learn about major conflicts.', available: false }],
                '9': [{ title: 'Physics Phenomena', desc: 'Explore laws of motion.', available: false }, { title: 'Advanced Grammar', desc: 'Perfect your writing skills.', available: false }, { title: 'Civics City', desc: 'Learn about government.', available: false }, { title: 'Trigonometry Towers', desc: 'Solve problems with triangles.', available: false }],
                '10': [{ title: 'Calculus Quest', desc: 'Tackle derivatives.', available: false }, { title: 'Genetics Lab', desc: 'Explore DNA and heredity.', available: false }, { title: 'Economics Empire', desc: 'Learn about markets.', available: false }, {id: 'play-history-game', title: 'Modern History', desc: 'Explore the 20th century.', available: true }],
                '11': [{ title: 'Organic Chemistry', desc: 'Master carbon compounds.', available: false }, { title: 'Statistics Sprint', desc: 'Analyze data and probabilities.', available: false }, { title: 'World Literature', desc: 'Read global masterpieces.', available: false }, { title: 'Macroeconomics', desc: 'Understand national economies.', available: false }],
                '12': [{id: 'play-lightpuzzle-game', title: 'Light Puzzle', desc: 'Dive into the ray', available: true }, { title: 'Advanced Calculus', desc: 'Explore multivariable calculus.', available: false }, { title: 'Philosophy Forge', desc: 'Debate the big questions.', available: false }, { title: 'Global Politics', desc: 'Understand international relations.', available: false }],
            };

            const moduleData = {
                '6': [
                    { title: 'Odia', notes: '<p>The Odia alphabet is known as the "Barnabodha." It consists of vowels (swarabarna) and consonants (byanjanbarna). Nouns (bisheshya) are naming words, and verbs (kriya) show action. Basic sentence structure is Subject-Object-Verb.</p>', questions: '<p>1. Write the Odia vowels.<br>2. What is a "bisheshya"?<br>3. Form a simple sentence using a noun and a verb.</p>' },
                    { title: 'English', notes: '<p>The parts of speech are nouns, pronouns, verbs, adjectives, adverbs, prepositions, conjunctions, and interjections. Tenses indicate the time of an action. Present, past, and future are the three main tenses.</p>', questions: '<p>1. Identify the nouns in the sentence: "The cat sat on the mat."<br>2. What is the past tense of "run"?<br>3. Give an example of a preposition.</p>' },
                    { title: 'Mathematics', notes: '<p>The number system includes natural numbers, whole numbers, and integers. Geometry is the study of shapes, sizes, and properties of space. Basic shapes include triangles, squares, and circles.</p>', questions: '<p>1. What is the difference between a whole number and a natural number?<br>2. How many sides does a hexagon have?<br>3. What is the formula for the area of a rectangle?</p>' },
                    { title: 'General Science', notes: '<p>Living things grow, breathe, move, and reproduce. Non-living things do not. Plants produce their own food through photosynthesis. Animals depend on plants or other animals for food.</p>', questions: '<p>1. Name two characteristics of living things.<br>2. What is photosynthesis?<br>3. Give an example of a herbivore, carnivore, and omnivore.</p>' }
                ],
                '7': [
                    { title: 'Odia', notes: '<p>Advanced Odia grammar includes sandhi (joining of words), samasa (compound words), and karaka (case endings). These elements help in forming complex and meaningful sentences.</p>', questions: '<p>1. What is the sandhi of "vidya" and "alaya"?<br>2. Give an example of a "karmadharaya samasa."<br>3. What are the different types of karaka in Odia grammar?</p>' },
                    { title: 'English', notes: '<p>Writing skills involve structuring paragraphs with a topic sentence, supporting details, and a concluding sentence. Different types of writing include narrative, descriptive, expository, and persuasive.</p>', questions: '<p>1. Write a short descriptive paragraph about a rainy day.<br>2. What is the difference between a formal and an informal letter?<br>3. What are the key elements of a good story?</p>' },
                    { title: 'Mathematics', notes: '<p>Algebra is a branch of mathematics that uses letters and symbols to represent numbers and quantities in formulas and equations. A linear equation is an equation that can be written in the form ax + b = 0.</p>', questions: '<p>1. Solve for x: 2x + 5 = 15.<br>2. What is a variable in algebra?<br>3. Simplify the expression: 3(x + 2) - 5.</p>' },
                    { title: 'Science', notes: '<p>Acids are substances that taste sour, turn blue litmus paper red, and have a pH less than 7. Bases are substances that taste bitter, turn red litmus paper blue, and have a pH greater than 7. Neutral substances have a pH of 7.</p>', questions: '<p>1. Give an example of a common household acid.<br>2. What happens when an acid and a base react?<br>3. What is the pH of pure water?</p>' }
                ],
                '8': [
                    { title: 'Odia', notes: '<p>Odia poetry is rich in imagery and literary devices such as upama (simile), rupaka (metaphor), and anuprasa (alliteration). Famous Odia poets include Sarala Das, Jagannath Das, and Fakir Mohan Senapati.</p>', questions: '<p>1. Who is known as the "Vyasakabi" of Odisha?<br>2. What is the main theme of the "Sarala Mahabharata"?<br>3. Give an example of "upama" from an Odia poem.</p>' },
                    { title: 'English', notes: '<p>Literary analysis involves examining the different elements of a text, such as plot, character, theme, and setting. Figurative language, such as similes, metaphors, and personification, adds depth and meaning to a text.</p>', questions: '<p>1. What is the theme of the story "The Gift of the Magi"?<br>2. Identify the protagonist and antagonist in a story you have read.<br>3. What is the difference between a simile and a metaphor?</p>' },
                    { title: 'Mathematics', notes: '<p>Rational numbers are numbers that can be expressed as a fraction p/q, where p and q are integers and q is not equal to 0. Mensuration is the branch of geometry that deals with the measurement of length, area, and volume.</p>', questions: '<p>1. Is 0 a rational number? Why or why not?<br>2. What is the formula for the volume of a cylinder?<br>3. If the side of a square is 5 cm, what is its area?</p>' },
                    { title: 'Science', notes: '<p>The cell is the basic structural and functional unit of all known organisms. Microorganisms are microscopic organisms, such as bacteria, viruses, and fungi, that can be either beneficial or harmful.</p>', questions: '<p>1. What is the function of the nucleus in a cell?<br>2. Name a disease caused by a virus.<br>3. How is curd made from milk?</p>' }
                ],
                '9': [
                    { title: 'Odia Literature', notes: '<p>Modern Odia literature has seen the rise of new genres and styles, including the short story, the novel, and the one-act play. Prominent modern writers include Gopinath Mohanty, Surendra Mohanty, and Manoj Das.</p>', questions: '<p>1. Who wrote the first Odia novel, "Padmamali"?<br>2. Name a famous short story by Manoj Das.<br>3. What are the major themes in Gopinath Mohanty\'s novels?</p>' },
                    { title: 'English Prose & Poetry', notes: '<p>Shakespeare\'s plays are known for their complex characters, intricate plots, and beautiful language. The Romantic poets, such as Wordsworth and Coleridge, celebrated nature, emotion, and the individual.</p>', questions: '<p>1. Who is the tragic hero in Shakespeare\'s "Hamlet"?<br>2. What is the theme of Wordsworth\'s poem "Tintern Abbey"?<br>3. How did the Industrial Revolution influence Romantic poetry?</p>' },
                    { title: 'Mathematics', notes: '<p>A polynomial is an expression consisting of variables and coefficients, involving only the operations of addition, subtraction, multiplication, and non-negative integer exponents. Coordinate geometry is the study of geometry using a coordinate system.</p>', questions: '<p>1. What is the degree of the polynomial 3x^2 + 5x - 2?<br>2. What is the distance between the points (1, 2) and (4, 6)?<br>3. What is the slope of the line passing through the points (2, 3) and (5, 9)?</p>' },
                    { title: 'Physical & Life Science', notes: '<p>Newton\'s laws of motion are three physical laws that, together, laid the foundation for classical mechanics. The diversity of living organisms is a result of evolution, the process by which different kinds of living organisms are thought to have developed and diversified from earlier forms.</p>', questions: '<p>1. State Newton\'s second law of motion.<br>2. What is the difference between an invertebrate and a vertebrate?<br>3. What is the theory of evolution by natural selection?</p>' }
                ],
                '10': [
                    { title: 'Odia Grammar', notes: '<p>Advanced Odia syntax involves understanding complex sentence structures, including compound and complex sentences. Precis writing is the art of summarizing a passage in a clear and concise manner.</p>', questions: '<p>1. Give an example of a complex sentence in Odia.<br>2. What are the key steps in writing a precis?<br>3. How can you improve your writing skills in Odia?</p>' },
                    { title: 'English Writing Skills', notes: '<p>Formal writing is used for official or academic purposes, while informal writing is used for personal communication. Creative writing allows for the expression of thoughts, feelings, and ideas in an imaginative way.</p>', questions: '<p>1. Write a formal letter to the principal of your school.<br>2. What are the elements of a good short story?<br>3. How can you make your writing more creative and engaging?</p>' },
                    { title: 'Mathematics', notes: '<p>Trigonometry is the branch of mathematics that studies relationships between the sides and angles of triangles. Statistics is the study of the collection, analysis, interpretation, presentation, and organization of data.</p>', questions: '<p>1. What are the three basic trigonometric ratios?<br>2. What is the difference between the mean, median, and mode?<br>3. What is the probability of getting a head when a coin is tossed?</p>' },
                    { title: 'Science', notes: '<p>A chemical reaction is a process that leads to the chemical transformation of one set of chemical substances to another. Heredity is the passing on of traits from parents to their offspring.</p>', questions: '<p>1. What is a balanced chemical equation?<br>2. What are the different types of chemical reactions?<br>3. What are Mendel\'s laws of inheritance?</p>' }
                ],
                '11': [
                    { title: 'Physics', notes: '<p>Kinematics is the branch of mechanics that deals with the motion of objects without considering the forces that cause the motion. Newton\'s laws of motion describe the relationship between the motion of an object and the forces acting on it.</p>', questions: '<p>1. What is the difference between speed and velocity?<br>2. State the law of conservation of momentum.<br>3. What is the work-energy theorem?</p>' },
                    { title: 'Chemistry', notes: '<p>The mole is the unit of amount in chemistry. The structure of an atom is described by the arrangement of its electrons in shells and subshells. Chemical bonding involves the sharing or transfer of electrons between atoms.</p>', questions: '<p>1. What is Avogadro\'s number?<br>2. What are the four quantum numbers?<br>3. What is the difference between a covalent bond and an ionic bond?</p>' },
                    { title: 'Mathematics', notes: '<p>A set is a well-defined collection of distinct objects. A function is a relation between a set of inputs and a set of permissible outputs with the property that each input is related to exactly one output. A limit is the value that a function approaches as the input approaches some value.</p>', questions: '<p>1. What is the power set of the set {1, 2}?<br>2. What is the domain and range of the function f(x) = x^2?<br>3. What is the limit of the function f(x) = 2x + 3 as x approaches 1?</p>' },
                    { title: 'Biology', notes: '<p>The diversity of living organisms is vast, and they are classified into different kingdoms based on their characteristics. The cell is the basic unit of life, and it has various organelles that perform specific functions.</p>', questions: '<p>1. What are the five kingdoms of life?<br>2. What is the function of the mitochondria in a cell?<br>3. What is the difference between a prokaryotic and a eukaryotic cell?</p>' }
                ],
                '12': [
                    { title: 'Physics', notes: '<p>Electrostatics is the study of electric charges at rest. Magnetism is the force exerted by magnets when they attract or repel each other. Optics is the branch of physics that studies the behavior and properties of light.</p>', questions: '<p>1. What is Coulomb\'s law?<br>2. What is a magnetic field?<br>3. What is the difference between reflection and refraction of light?</p>' },
                    { title: 'Chemistry', notes: '<p>The solid state is one of the four fundamental states of matter. A solution is a homogeneous mixture of two or more substances. Electrochemistry is the study of the relationship between electricity and chemical reactions.</p>', questions: '<p>1. What is a unit cell in a crystal lattice?<br>2. What are colligative properties of solutions?<br>3. What is Faraday\'s first law of electrolysis?</p>' },
                    { title: 'Mathematics', notes: '<p>Calculus is the mathematical study of continuous change. Vectors are quantities that have both magnitude and direction. Three-dimensional geometry is the study of shapes in three-dimensional space.</p>', questions: '<p>1. What is the derivative of the function f(x) = x^2?<br>2. What is the dot product of two vectors?<br>3. What is the equation of a plane in three-dimensional space?</p>' },
                    { title: 'Biology', notes: '<p>Reproduction is the biological process by which new individual organisms are produced from their parents. Genetics is the study of genes, genetic variation, and heredity in organisms. Ecology is the study of the interactions between organisms and their environment.</p>', questions: '<p>1. What is the difference between sexual and asexual reproduction?<br>2. What is a gene?<br>3. What is an ecosystem?</p>' }
                ]
            };

            function renderContent(grade) {
                // Render Games
                gamesGridContainer.innerHTML = '';
                const games = gameData[grade] || [];
                games.forEach(game => {
                    const gameCard = document.createElement('div');
                    gameCard.classList.add('game-card');
                    if (game.available) {
                        gameCard.id = game.id;
                        gameCard.classList.add('cursor-pointer');
                        gameCard.innerHTML = `
                            <div class="game-card-banner h-32 flex items-center justify-center p-4"><h2 class="font-baloo text-2xl text-white text-center">${game.title}</h2></div>
                            <div class="p-4"><p class="text-gray-600 text-sm">${game.desc}</p></div>
                        `;
                        gameCard.addEventListener('click', () => {
                            const gameViewContainer = document.getElementById('game-view');
                            const gameViewContent = document.getElementById('game-view-content');
                            gameViewContent.innerHTML = ''; // Clear previous game content


                            
                            const gameIframe = document.createElement('iframe');
 if (game.id === 'play-language-game') {
    gameIframe.src = "LANGUAGE_LEARNING_GAME.html";
} else if (game.id === 'play-algebra-game') {
    gameIframe.src = "Maths.html";
} else if (game.id === 'play-history-game') {
    gameIframe.src = "History.html";
}
else if (game.id === 'play-lightpuzzle-game') {
    gameIframe.src = "intro.html";
}                       gameIframe.style.width = '100%';
                            gameIframe.style.height = '100%';
                            gameIframe.style.border = 'none';
                            
                            gameViewContent.appendChild(gameIframe);
                            gameViewContainer.classList.remove('hidden');
                            // --- SCREEN TIME: start session and game timer ---
                            startSessionIfNeeded();
                            startGameTimer();
                            currentGameIframe = gameIframe;
                        });
                    } else {
                        gameCard.classList.add('disabled');
                        gameCard.innerHTML = `
                            <div class="game-card-banner coming-soon h-32 flex items-center justify-center p-4"><h2 class="font-baloo text-2xl text-white text-center">${game.title}</h2></div>
                            <div class="p-4 flex flex-col items-center"><p class="text-gray-600 text-sm mb-2">${game.desc}</p><span class="text-xs font-bold text-gray-500 bg-gray-200 px-2 py-1 rounded-full">COMING SOON</span></div>
                        `;
                    }
                    gamesGridContainer.appendChild(gameCard);
                });

                // Render Modules
                modulesGridContainer.innerHTML = '';
                const modules = moduleData[grade] || [];
                modules.forEach(module => {
                    const moduleCard = document.createElement('div');
                    moduleCard.classList.add('module-card', 'cursor-pointer');
                    moduleCard.innerHTML = `
                        <div class="module-card-banner h-32 flex items-center justify-center p-4"><h2 class="font-baloo text-2xl text-white text-center">${module.title}</h2></div>
                    `;
                    moduleCard.addEventListener('click', () => {
                        const moduleContentModal = document.createElement('div');
                        moduleContentModal.classList.add('modal-overlay');
                        moduleContentModal.innerHTML = `
                            <div class="modal-content">
                                <h2 class="text-2xl font-bold mb-4">${module.title} - Grade ${grade}</h2>
                                <h3 class="font-bold text-lg mb-2">Short Notes</h3>
                                ${module.notes}
                                <h3 class="font-bold text-lg mt-4 mb-2">Practice Questions</h3>
                                ${module.questions}
                                <div class="flex justify-end mt-6"><button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Close</button></div>
                            </div>
                        `;
                        moduleContentModal.querySelector('button').addEventListener('click', () => {
                            moduleContentModal.remove();
                        });
                        document.body.appendChild(moduleContentModal);
                    });
                    modulesGridContainer.appendChild(moduleCard);
                });
            }

            // Initial render
            renderContent(profileGrade.textContent.match(/\d+/)[0]);
        });
// Listen for messages from the game iframe
window.addEventListener('message', (event) => {
  if (event.data && event.data.action === 'closeGame') {
    document.getElementById('game-view-content').innerHTML = '';
    document.getElementById('game-view').classList.add('hidden');
    // Optionally scroll to or activate the Games panel
    window.location.hash = 'games-view';
    // stop game timer when iframe signals close
    stopGameTimer();
  }
});
const chatBox = document.getElementById('chat-box');
const chatInput = document.getElementById('chat-input');
const chatSend = document.getElementById('chat-send');
const raiseTicketBtn = document.getElementById('raise-ticket');

// --- Screen time tracking variables & helpers ---
let sessionStarted = false;
let sessionStartTs = null;
let siteAccum = 0; // seconds spent on site (non-game)
let gameAccum = 0; // seconds spent in game
let gameRunning = false;
let gameStartTs = null;
let sessionTimerInterval = null;
let currentGameIframe = null;

function formatSecs(s) {
    const h = String(Math.floor(s/3600)).padStart(2,'0');
    const m = String(Math.floor((s%3600)/60)).padStart(2,'0');
    const sec = String(s%60).padStart(2,'0');
    return `${h}:${m}:${sec}`;
}

function startSessionIfNeeded() {
    if (!sessionStarted) {
        sessionStarted = true;
        sessionStartTs = Date.now();
        sessionTimerInterval = setInterval(() => {
            if (gameRunning) gameAccum += 1;
            else siteAccum += 1;
            updateSessionUI();
        }, 1000);
    }
}

function startGameTimer() {
    if (!sessionStarted) startSessionIfNeeded();
    if (!gameRunning) {
        gameRunning = true;
        gameStartTs = Date.now();
        updateSessionUI();
    }
}

function stopGameTimer() {
    if (gameRunning) {
        gameRunning = false;
        const now = Date.now();
        const delta = Math.floor((now - gameStartTs) / 1000);
        gameAccum += delta;
        gameStartTs = null;
        updateSessionUI();
    }
}

function resetSession() {
    sessionStarted = false;
    sessionStartTs = null;
    siteAccum = 0;
    gameAccum = 0;
    gameRunning = false;
    if (sessionTimerInterval) { clearInterval(sessionTimerInterval); sessionTimerInterval = null; }
    updateSessionUI();
}

function updateSessionUI() {
    const total = siteAccum + gameAccum;
    const elTotal = document.getElementById('session-total');
    const elSite = document.getElementById('session-site');
    const elGame = document.getElementById('session-game');
    if (elTotal) elTotal.textContent = formatSecs(total);
    if (elSite) elSite.textContent = formatSecs(siteAccum);
    if (elGame) elGame.textContent = formatSecs(gameAccum);
}

document.addEventListener('DOMContentLoaded', () => {
    const resetBtn = document.getElementById('reset-session');
    if (resetBtn) resetBtn.addEventListener('click', resetSession);
    // auto-start baseline session
    startSessionIfNeeded();
});

function appendMessage(sender, text) {
    const msg = document.createElement('div');
    msg.className = sender === 'bot' ? 'text-left mb-2' : 'text-right mb-2';
    msg.innerHTML = `<span class="inline-block px-3 py-2 rounded-lg ${sender === 'bot' ? 'bg-gray-200 text-gray-800' : 'bg-blue-500 text-white'}">${text}</span>`;
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
}

const botReplies = {
    "password": "To reset your password, go to My Profile > Change Password.",
    "badge": "You can see your badges in the Dashboard section.",
    "game": "Go to Games in the sidebar to start playing.",
    "account": "Please raise a ticket for account-related help."
};

chatSend.addEventListener('click', () => {
    const userText = chatInput.value.trim();
    if (!userText) return;
    appendMessage('user', userText);
    chatInput.value = '';

    let reply = "I'm not sure about that. Please raise a ticket.";
    for (const key in botReplies) {
        if (userText.toLowerCase().includes(key)) {
            reply = botReplies[key];
            break;
        }
    }
    setTimeout(() => appendMessage('bot', reply), 500);
});

chatInput.addEventListener('keypress', e => {
    if (e.key === 'Enter') chatSend.click();
});

    </script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  // FAQ Accordion Logic
  document.querySelectorAll(".accordion-question").forEach(q => {
    q.addEventListener("click", function() {
      const a = this.nextElementSibling;
      if(a.style.display === "block") { a.style.display = "none"; }
      else {
        document.querySelectorAll(".accordion-answer").forEach(ans => ans.style.display = "none");
        a.style.display = "block";
      }
    });
  });

  // Ticket Modal logic
  const ticketModal = document.getElementById('ticket-modal');
  document.getElementById('raise-ticket').onclick = () => {
    ticketModal.classList.remove('hidden');
    document.getElementById('ticket-form').classList.remove('hidden');
    document.getElementById('ticket-success').classList.add('hidden');
    document.getElementById('ticket-form').reset();
  };
  document.getElementById('ticket-cancel').onclick = () => {
    ticketModal.classList.add('hidden');
  };
  document.getElementById('ticket-form').onsubmit = function(e){
    e.preventDefault();
    this.classList.add('hidden');
    document.getElementById('ticket-success').classList.remove('hidden');
    setTimeout(()=>{ticketModal.classList.add('hidden');}, 2000);
  };

  // Chatbot Quick Questions & Messaging
  const chatBox = document.getElementById('chat-box');
  const chatInput = document.getElementById('chat-input');
  const chatSend = document.getElementById('chat-send');
  const quickQues = [
    {q:"How to update my profile?",a:"Go to My Profile and click 'Edit Profile Information'."},
    {q:"Where are my game stats?",a:"View your game stats in the Dashboard under Total Score and Games Played."},
    {q:"How to earn more badges?",a:"You can earn badges by completing games and participating in modules!"},
    {q:"How can I contact my teacher?",a:"Currently, direct contact is unavailable. Please raise a ticket for queries."}
  ];
  function appendMessage(sender, text) {
    const msg = document.createElement('div');
    msg.className = sender === 'bot' ? 'text-left mb-2' : 'text-right mb-2';
    msg.innerHTML = `<span class="inline-block px-3 py-2 rounded-lg ${sender === 'bot' ? 'bg-gray-200 text-gray-800' : 'bg-blue-500 text-white'}">${text}</span>`;
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
  }
  chatSend.addEventListener('click', () => {
    const userText = chatInput.value.trim();
    if (!userText) return;
    appendMessage('user', userText);
    chatInput.value = '';
    let reply = "I'm not sure about that, please raise a ticket.";
    for (let {q,a} of quickQues) {
      if(userText.toLowerCase().includes(q.toLowerCase().split(' ')[1])){
        reply = a;
        break;
      }
    }
    setTimeout(() => appendMessage('bot', reply), 500);
  });
  chatInput.addEventListener('keypress', e => { if (e.key === 'Enter') chatSend.click(); });
  // Quick question buttons for chatbot
  const quickDiv = document.getElementById('bot-quick-questions');
  quickQues.forEach(({q,a}) => {
    const btn = document.createElement('button');
    btn.type = "button";
    btn.className = "bg-gray-200 hover:bg-blue-200 text-gray-700 px-3 py-1 rounded mb-1";
    btn.innerText = q;
    btn.onclick = () => {
      appendMessage('user', q);
      setTimeout(() => appendMessage('bot', a), 400);
    };
    quickDiv.appendChild(btn);
  });
});
</script>

</body>
</html>
